{% extends "base.html" %}

{% load static %}

{% block content %}

<div class="row">
    <div class="col-lg-3 grid-margin stretch-card">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Aluno</h4>
                <img src="{% static 'assets/images/faces/students/' %}{{ student.registry }}.jpg"
                               class="mb-" width="200" height="250" alt="Foto do aluno">
            </div>
        </div>
    </div>
    <div class="col-lg-9 grid-margin stretch-card">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Informações do Aluno</h4>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                          <tr>                           
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <th>Nome</th>
                            <td>{{ student.name }}</td>

                            <th>Turma</th>
                            <td>{{ student.class_group_name }}</td>

                            <th>Nome do Pai</th>
                            <td>{{ student.father_name }}</td>
                              
                        </tr>
                        <tr>
                            <th>RA</th>
                            <td>{{ student.registry }}</td>
                            
                            <th>Data de nascimento</th>
                            <td>{{ student.birth_date|date:"d/m/Y" }}</td>
                            
                            <th>Telefone do Pai</th>
                            <td>{{ student.father_phone }}</td>
                              
                        </tr>
                        <tr>
                            <th>Idade</th>
                            <td>{{ student.age }}</td>

                            <th>Nome da Mãe</th>
                            <td>{{ student.mother_name }}</td>
                            <th></th>
                            <td></td>
                                   
                        </tr>
                        <tr>
                            <th>Gênero</th>
                            <td>{{ student.gender }}</td>
                            
                            <th>Telefone da Mãe</th>
                            <td>{{ student.mother_phone }}</td>

                            <th></th>
                            <td></td>
                          </tr>
                          
                        </tbody>
                      </table>
                      <hr>
                      <h4 class="card-title mt-3">Alergias</h4>
                      <p>{{ student.info.allergies }}</p>
                      
                      
                  </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-12 grid-margin stretch-card">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">
                    Atendimentos do paciente: 
                    {% if appointment %}
                        {{ appointment|length }} <!-- Exibe o número total de atendimentos -->
                    {% else %}
                        0
                    {% endif %}
                </h4>
                <div class="table-responsive">                   
                    <table class="table">
                        <thead>
                        <tr>
                            <th>Enfermaria</th>
                            <th>Enfermeira</th>
                            <th>Data</th>
                            <th>Aula atual</th>
                            <th>Ocorrência</th>
                            <th>Procedimentos</th>
                            <th>Observações</th>
                            <th>Reavaliação</th>
                            <th>Contato com os pais</th>
                        </tr>
                        </thead>
                        <tbody>
                            {% for appointment in appointment %}
                            <tr>
                                <td>{{ appointment.infirmary }}</td>
                                <td>{{ appointment.nurse }}</td>
                                <td>{{ appointment.date|date:"d/m/Y - H:i" }}</td>
                                <td>{{ appointment.current_class }}</td>
                                <td>{{ appointment.reason }}</td>
                                <td>{{ appointment.treatment }}</td>
                                <td>{{ appointment.notes }}</td>
                                <td>{% if appointment.revaluation %}
                                    Sim
                                {% else %}
                                    Não
                                {% endif %}</td>
                                <td>{% if appointment.contact_parents %}
                                    Sim
                                {% else %}
                                    Não
                                {% endif %}</td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="9">Nenhum atendimento encontrado.</td>
                            </tr>
                            {% endfor %}
                        
                        </tbody>
                    </table>
                </div>
            </div>    
        </div>
    </div>
</div>
</div>



{% endblock %}