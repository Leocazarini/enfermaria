{% extends "base.html" %}

{% load static %}

{% block title %}Relatórios - Enfermaria Beit Yaacov{% endblock %}

{% block content %}

<div class="row">
    <div class="col-lg-12 grid-margin stretch-card">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">
                    Relatório de Atendimentos: 
                    {% if all_appointments %}
                        {{ all_appointments|length }}
                    {% else %}
                        0
                    {% endif %}
                </h4>
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Tipo</th>
                                <th>Nome</th>
                                <th>{{ 'Informação Adicional' }}</th>
                                <th>Idade</th>
                                <th>Gênero</th>
                                <th>Data</th>
                                <th>Motivo</th>
                                <th>Tratamento</th>
                                <th>Observações</th>
                                <th>Enfermaria</th>
                                <th>Enfermeira</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for appointment in all_appointments %}
                            <tr>
                                <td>{{ appointment.type }}</td>
                                <td>{{ appointment.name }}</td>
                                <td>{{ appointment.additional_info_label }}: {{ appointment.additional_info }}</td>
                                <td>{{ appointment.age }}</td>
                                <td>{{ appointment.gender }}</td>
                                <td>{{ appointment.date|date:"d/m/Y - H:i" }}</td>
                                <td>{{ appointment.reason }}</td>
                                <td>{{ appointment.treatment }}</td>
                                <td>{{ appointment.notes|default:'-' }}</td>
                                <td>{{ appointment.infirmary }}</td>
                                <td>{{ appointment.nurse }}</td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="11">Nenhum atendimento encontrado.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>    
        </div>
    </div>
</div>
{% endblock %} 


{% block extra_scripts %}

<script src="{% static 'assets/js/reports.js' %}?v=1.0"></script>


{% endblock %}